<!DOCTYPE html>
<html>
	<head>
		<title>Tic Tac Toe</title>
		<style>
			*{
				box-sizing: border-box;
				font-family: sans-serif;
			}

			body{
				margin :0;
				padding: 0;
				width: 100%;
				height: 100vh;
				display: flex;
				justify-content: center;
				align-items: center;
				background-color: darkslategray;
			}

			.container{
				width: 500px;
				height: 500px;
				display: grid;
				background-color: lightslategrey;
				grid-gap:5px;
				grid-template-columns: 33% 33% 33%;
				grid-auto-rows: 33% 33% 33%;
			}

			.card{
				position: relative;
				background-color: cornflowerblue;
				cursor: pointer;
			}

			.card::before{
				position: absolute;
				top: 0;
				right: 0;
				bottom: 0;
				left: 0;
				display: flex;
				justify-content: center;
				align-items: center;
				font-weight: bold;
				font-size: 8rem;
			}
			.card.x::before{
				content: 'x';
			}
			.card.o::before{
				content: 'o';
			}

			.winner{
				display: flex;
				flex-direction: column;
				align-items: center;
				justify-content: center;
				align-items: center;
				position: fixed;
				width: 400px;
				height: 200px;
				padding: 20px 40px;
				background-color: rgb(98, 237, 140);
				font-size: 2rem;
				border-radius: 20px;
				text-align: center;
				animation:  animate .5s linear;
			}

			@keyframes animate{
				from{
					opacity: 0;
				}to{
					opacity: 1;
				}
			}

			.winner button{
				margin-top: 20px;
				width: 80px;
				height: 35px;
				line-height: 35px;
				padding: 0;
				border: 0;
				outline: 0;
				border-radius: 20px;
				cursor: #ff5;
				background-color: chartreuse;
			}

		</style>
	</head>
	<body>
		<div class="container">
			<div class="card" data-index="1"></div>
			<div class="card" data-index="2"></div>
			<div class="card" data-index="3"></div>
			<div class="card" data-index="4"></div>
			<div class="card" data-index="5"></div>
			<div class="card" data-index="6"></div>
			<div class="card" data-index="7"></div>
			<div class="card" data-index="8"></div>
			<div class="card" data-index="9"></div> 

		</div>
		<script>
			const cards = Array.from(document.querySelectorAll(".card"));
			const winner = [[1,2,3],[4,5,6],[7,8,9],[1,5,9],[3,5,7],[1,4,7],[2,5,8],[3,6,9]];
			let firstPlayer =[], secondPlayer =[], count=0;

			function check(array){
				let finalResult = false;

				for(let item of winner){
					let res=item.every(val=>array.indexOf(val)!== -1);
					if(res){
						finalResult = true;
						break;
					}
				}
				return finalResult;
			}

			function winnerplayer(p){
				const modal = document.createElement("div");
				const player = document.createTextNode(p);
				const replay = document.createElement("button");
				modal.classList.add("winner");
				modal.appendChild(player);
				replay.appendChild(document.createTextNode("Mamerina!"));
				replay.onclick=()=>{rep()};
				modal.appendChild(replay);
				document.body.appendChild(modal);
			}

			function draw(){
				if(this.classList == "card"){
					count++;
					if(count%2 !== 0){
						this.classList.add("x");
						firstPlayer.push(Number(this.dataset.index));
						if(check(firstPlayer)){
							winnerplayer("Arabaina fa naharesy ianao!! \n Mpilalao voalohany");
						}
					}else{
						this.classList.add("o");
						secondPlayer.push(Number(this.dataset.index));
						if(check(secondPlayer)){
							winnerplayer("Arabaina fa naharesy ianao!!\Mpilalao faharoa");

						}
					}
					if(count ===9){
						winnerplayer("draw");
					}
				}
			}

			function rep(){
				const w = document.querySelector(".winner");
				this.firstPlayer = [];
				this.secondPlayer = [];
				count=0;
				w.remove();
				document.clear();
			}
			cards.forEach(cards => cards.addEventListener("click",draw))
		</script>
	</body>
</html>
